(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{371:function(e,t,s){"use strict";s.r(t);var a=s(42),o=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"configuration-and-running"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration-and-running"}},[e._v("#")]),e._v(" Configuration and running")]),e._v(" "),s("p",[e._v("Table of contents:")]),e._v(" "),s("p"),s("div",{staticClass:"table-of-contents"},[s("ul",[s("li",[s("a",{attrs:{href:"#running-jobs"}},[e._v("Running jobs")])]),s("li",[s("a",{attrs:{href:"#configuration-files"}},[e._v("Configuration files")])]),s("li",[s("a",{attrs:{href:"#the-syntax-of-the-configuration-files"}},[e._v("The syntax of the configuration files")])]),s("li",[s("a",{attrs:{href:"#configuring-modules-and-jobs"}},[e._v("Configuring modules and jobs")])]),s("li",[s("a",{attrs:{href:"#loading-order-of-the-configuration-files"}},[e._v("Loading order of the configuration files")])]),s("li",[s("a",{attrs:{href:"#an-example-of-a-configuration-file"}},[e._v("An example of a configuration file")])]),s("li",[s("a",{attrs:{href:"#special-configuration-sections"}},[e._v("Special configuration sections")]),s("ul",[s("li",[s("a",{attrs:{href:"#default-section"}},[e._v("DEFAULT section")])]),s("li",[s("a",{attrs:{href:"#rvt2-section-and-plugins"}},[e._v("rvt2 section and plugins")])]),s("li",[s("a",{attrs:{href:"#main-section"}},[e._v("Main section")])])])])])]),s("p"),e._v(" "),s("h2",{attrs:{id:"running-jobs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#running-jobs"}},[e._v("#")]),e._v(" Running jobs")]),e._v(" "),s("p",[e._v("Most of the time, you are going to run one of the predefined jobs with the default configuration. For example, to index the content of a disk in ElasticSearch, run:")]),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("rvt2 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    --casename "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("112233")]),e._v(" --source 01 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    -j indexer.save_directory "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    --params "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("option1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),e._v(" option2 -- "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("\\")]),e._v("\n    path_to_a_directory\n")])])]),s("p",[e._v("There are dozens of predefined jobs with a default configuration you won't need to change.\nCheck the "),s("RouterLink",{attrs:{to:"/rvt2/examples.html"}},[e._v("examples section")]),e._v(" for some examples.\nYou can get the list of predefined by running the job "),s("code",[e._v("show_jobs")]),e._v(", which is also the default job:")],1),e._v(" "),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(">")]),e._v(" rvt2\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("# Available jobs")]),e._v("\n\n- show_jobs: Show available jobs.\n- mount: Mount all partitions of a disk image\n- umount: Unmount all partitions of a disk image\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("..")]),e._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\n")])])]),s("h2",{attrs:{id:"configuration-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuration-files"}},[e._v("#")]),e._v(" Configuration files")]),e._v(" "),s("p",[e._v("Sometimes, you would want to run a customized job. In these cases, you must write a configuration file and load it.\nIf there is a file named "),s("code",[e._v("rvt2.cfg")]),e._v(" in the current directory, the system will load it automatically:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rvt2 [OPTIONAL_PATH]\n")])])]),s("p",[e._v("Alternatively, you can create a "),s("code",[e._v("numcase.cfg")]),e._v(" with information about the job and then:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rvt2 --config numcase.cfg [OPTIONAL_PATH]\n")])])]),s("p",[e._v("The default jobs, modules and configuration is read from the system configuration files.\nThese files are included in the directory "),s("code",[e._v("$RVTHOME/conf")]),e._v(". If you are a user of the RVT2,\nyou SHOULDN'T modify these files. Your system administrator can modify the file "),s("code",[e._v("$RVTHOME/conf/local.cfg")]),e._v(".\nIf your case needs a specific configuration, use your own configuration file and load it with the "),s("em",[e._v("--config")]),e._v(" parameter.")]),e._v(" "),s("h2",{attrs:{id:"the-syntax-of-the-configuration-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-syntax-of-the-configuration-files"}},[e._v("#")]),e._v(" The syntax of the configuration files")]),e._v(" "),s("p",[e._v("The configuration system uses the standard Python package "),s("a",{attrs:{href:"https://docs.python.org/3/library/configparser.html",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("configparser")]),s("OutboundLink")],1),e._v(", in which configuration files are standard "),s("em",[e._v("ini")]),e._v(" files with a slightly modified "),s("code",[e._v("configparser.ExtendedInterpolation")]),e._v(" to allow one section to inherits all options from another section.")]),e._v(" "),s("p",[e._v("These are some examples:")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[DEFAULT]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; this is the default value for name, and it is automatically included in all sections")]),e._v("\nname: Johny\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Job1]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; the configuration system uses the ExtendedInterpolation syntax for the options.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('; In this case, greetings="Hello, Terry"')]),e._v("\ngreetings: Hello, ${name}\nname: Terry\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Job2]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; if name is not defined, the value in the DEFAULT section is used.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('; In this case, greetings="Hello, Johny"')]),e._v("\ngreetings: Hello, ${name}\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Job3]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; you can use options from another sections with the ${SECTION:OPTION} syntax")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('; In this case, greetings="Bye, Terry!"')]),e._v("\ngreetings: Bye, ${Job1:name}!\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Job4]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('; "inherits" copies in this section all options from another section')]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; except if they are already defined.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('; In this case, greetings (inherited, not explicitely defined)="Hello, Tim"')]),e._v("\ninherits: Job1\nname: Tim\n")])])]),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("inherits")]),e._v(" option was useful in the early versions of the RVT2. Currently, the configuration system uses "),s("code",[e._v("configparser.ExtendedInterpolation")]),e._v(" and passing options through the command line, and the support to the "),s("code",[e._v("inherits")]),e._v(" option might be deprecated in the future. The use of the "),s("code",[e._v("inherits")]),e._v(" option is discouraged for new modules and jobs.")])]),e._v(" "),s("h2",{attrs:{id:"configuring-modules-and-jobs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#configuring-modules-and-jobs"}},[e._v("#")]),e._v(" Configuring modules and jobs")]),e._v(" "),s("p",[e._v("From the "),s("RouterLink",{attrs:{to:"/rvt2/definitions.html"}},[e._v("Basic concepts")]),e._v(" chapter, we learnt that the RVT2 uses modules (classes extending "),s("code",[e._v("base.job.ModuleBase")]),e._v("), single jobs (a chain of modules) and composite jobs (a queue of single or composite jobs).")],1),e._v(" "),s("p",[e._v("The section describing a "),s("strong",[e._v("module")]),e._v(" has a "),s("code",[e._v("module")]),e._v(" option with the name of the class to load. Modules are free to use any number of options. The options available to a module are described in the "),s("a",{attrs:{href:"https://portal.incide.es/rvt2-dev",target:"_blank",rel:"noopener noreferrer"}},[e._v("Developers manual"),s("OutboundLink")],1),e._v(".")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[base.input.CSVReader]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; The module option tells the class to load.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; If a module option is not provided, the RVT2 will try to")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; load the name of the section as a class name")]),e._v("\nmodule: base.input.CSVReader\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; any additional configuration you might need")]),e._v("\noutfile: outfile.csv\ndelimiter: ;\n")])])]),s("p",[e._v("The section describing a "),s("strong",[e._v("single job")]),e._v(" has a "),s("code",[e._v("modules")]),e._v(" option with the chain of modules to run, one module per line. You can set the value for any option in this line and it will overwrite the option defined in the module configuration section.")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[MyJob]")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; (optional) A help message for your job")]),e._v("\ndescription: Write here a help message\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; (optional) Help messages are organized in sections (base, indexer, windows...)")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; Tell here the name of the section for this job")]),e._v("\nhelp_section: mysection\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; the module chain. You can pass options to overwrite the default configuration of the module.")]),e._v("\nmodules:\n    base.output.JSONSink outfile"),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("CONSOLE")]),e._v("\n    base.input.CSVReader delimiter"),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("{delimiter}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; the path for the job, if not provided from the command line")]),e._v("\npath: myfile.csv\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; Params configurable from the command line. See below")]),e._v("\ndefault_params: {'delimiter':'${base.input.CSVReader:delimiter}'}\n")])])]),s("p",[e._v("Actually, the "),s("code",[e._v("modules")]),e._v(" option is managed as a "),s("a",{attrs:{href:"https://docs.python.org/3/library/string.html#custom-string-formatting",target:"_blank",rel:"noopener noreferrer"}},[e._v("format string"),s("OutboundLink")],1),e._v(" where "),s("code",[e._v("kwargs")]),e._v(" is the "),s("code",[e._v("default_params")]),e._v(" option. In the example above, note the the "),s("code",[e._v("delimiter")]),e._v(" option inside "),s("code",[e._v("modules")]),e._v(" is referred as "),s("em",[e._v("{delimiter}")]),e._v(", without the leading '$': it is not interpolated by "),s("code",[e._v("configparser")]),e._v(" but like this: "),s("code",[e._v("modules = config.get('modules').format(**default_params)")]),e._v(".")]),e._v(" "),s("p",[e._v("You can overwrite the default params object when the job is run:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("rvt2 -j MyJob --params "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("delimiter")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('","')]),e._v(" -- myfile.csv\n")])])]),s("p",[e._v("Using the command line (or any other way that uses the function "),s("code",[e._v("run_job()")]),e._v(", as modules in package "),s("code",[e._v("base.threads")]),e._v(" do), you can not configure all parameters in a job section but only the parameters included in the "),s("em",[e._v("default_params")]),e._v(" dictionary.")]),e._v(" "),s("div",{staticClass:"custom-block warning"},[s("p",{staticClass:"custom-block-title"},[e._v("WARNING")]),e._v(" "),s("p",[e._v("The "),s("em",[e._v("default_params")]),e._v(" is used only by single or composite jobs, not modules. The job might want to send the custom param only to a few selected modules and not all of them. Think about this example:")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("[MyJob]ini\nmodules:\n    module1 option1=1 option2={option2}\n    module1 option1={option1} option2=2\ndefault_params: {'option1':'3','option2':'4'}\n")])])]),s("p",[e._v("Can be run as:")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("rvt2 -j MyJob --params "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("option1")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[e._v("option2")]),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("6")]),e._v("\n")])])])]),e._v(" "),s("div",{staticClass:"custom-block tip"},[s("p",{staticClass:"custom-block-title"},[e._v("TIP")]),e._v(" "),s("p",[e._v("Sometimes, it might be useful to have a module that is also a single job configurable from the command line. In this case, define a "),s("code",[e._v("module")]),e._v(" option as well as "),s("code",[e._v("modules")]),e._v(" and set the "),s("em",[e._v("default_params")]),e._v(" option using own interpolation:")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[mypackage.myclass]")]),e._v("\nmodule: mypackage.myclass\nsomeparam: 1\nmodules:\n    base.output.CSVSink outfile"),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v('"{outfile}"')]),e._v("\n    mypackage.myclass someparam"),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("{someparam}")]),e._v("\ndefault_params: {'outfile':'outfile.csv','someparam':'${someparam}'}\n")])])])]),e._v(" "),s("p",[e._v("The section describing a "),s("strong",[e._v("composite job")]),e._v(" has a "),s("code",[e._v("jobs")]),e._v(" option. The configuration is similar to a single job but with "),s("code",[e._v("jobs")]),e._v(" instead of "),s("code",[e._v("modules")]),e._v(". Note you can also overwrite the "),s("code",[e._v("path")]),e._v(" option of the single jobs, if needed.")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[MyCompositeJob]")]),e._v("\ndescription: Write here a help message\nhelp_section: mysection\njobs:\n    MyJob path"),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v('"${path}" delimiter={delimiter}')]),e._v("\n    help\npath: myfile.csv\ndefault_params: {'delimiter':';'}\n")])])]),s("h2",{attrs:{id:"loading-order-of-the-configuration-files"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loading-order-of-the-configuration-files"}},[e._v("#")]),e._v(" Loading order of the configuration files")]),e._v(" "),s("p",[e._v("All configuration files are loaded to create a common configuration object. The order in which the configuration files matters: if two different options for the same section are defined in two configuration files, the one read the last will overwrite the value of the first configuration file.")]),e._v(" "),s("p",[e._v("The RVT2 reads the configuration from these files and in this order. Every file is able to overwrite the configuration of the previous files.")]),e._v(" "),s("ol",[s("li",[s("code",[e._v("$RVTHOME/conf/*.cfg")]),e._v(": default configuration for the core jobs and modules. These files must be modified only by the package manager. In order to help us organizing the configuration files, jobs are defined in files names "),s("code",[e._v("jobs.cfg")]),e._v(" and modules in files named "),s("code",[e._v("modules.cfg")]),e._v(".")]),e._v(" "),s("li",[s("code",[e._v("$PLUGIN/*.cfg")]),e._v(": if a plugin is defined (see below), configuration for the jobs and modules provided by "),s("em",[e._v("PLUGIN")]),e._v(". This file must be modified only by the "),s("em",[e._v("PLUGIN")]),e._v(" developer. Plugins are encouraged to follow the same organization than the conf directory: the jobs provided by the plugin are defined in a file named "),s("code",[e._v("jobs.cfg")]),e._v(" and modules in a file named "),s("code",[e._v("modules.cfg")]),e._v(".")]),e._v(" "),s("li",[s("code",[e._v("$RVTHOME/conf/local.cfg")]),e._v(": any configuration valid only for the current computer. For example, the ElasticSearch server or the location of the log files. This file is optional, overwrites the previous files and should not be under version control.  This file must be modified only by the system administrator.")]),e._v(" "),s("li",[s("code",[e._v("$(pwd)/rvt2.cfg")]),e._v(": any configuration specific for the current execution. This file is optional. This file can be created by case analysts.")]),e._v(" "),s("li",[e._v("Any other files passed with the "),s("code",[e._v("--config")]),e._v(" parameter. This parameter can be used multiple times. These files can be created by case analysts.")])]),e._v(" "),s("h2",{attrs:{id:"an-example-of-a-configuration-file"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#an-example-of-a-configuration-file"}},[e._v("#")]),e._v(" An example of a configuration file")]),e._v(" "),s("p",[e._v("In the configuration system, sections configure jobs and modules. Some special sections are used to configure the RVT2 (such as the "),s("code",[e._v("[logging]")]),e._v(" or the "),s("code",[e._v("[rvt2]")]),e._v(" sections) and other sections might be values shared by other sections. The special "),s("code",[e._v("[DEFAULT]")]),e._v(" section defines the options shared by all the other sections.")]),e._v(" "),s("p",[e._v("This is an example of a configuration file:")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[DEFAULT]")]),e._v("\nsource: 112233-01-1\ncasename: 112233-case\nmorgue: /morgue\nrvthome: /usr/local/lib/rvt2\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[logging]")]),e._v("\nlogfile: ${rvthome}/rvt2.log\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[rvt2]")]),e._v("\nplugins:\n    ${rvthome}/plugins/indexer\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Main]")]),e._v("\njobs:\n   indexer.save_directory\npath: ${sourcedir}/mnt/p01\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[OtherJob]")]),e._v("\njobs: ${Main:jobs}\npath: ${sourcedir}/mnt/p02\n")])])]),s("p",[e._v("(This configuration file is equivalent to the default configuration of the job: "),s("code",[e._v("rvt --casename 112233-case --source 112233-01-1 -j indexer.save_directory")]),e._v(")")]),e._v(" "),s("p",[e._v("This configuration defines two composite jobs: "),s("code",[e._v("Main")]),e._v(" and "),s("code",[e._v("OtherJob")]),e._v(". Any of these composite jobs  will run a job named "),s("code",[e._v("indexer.save_directory")]),e._v(", which indexes the contents of the directory "),s("code",[e._v("/morgue/112233-case/112233-01-1/mnt/p0x")]),e._v(".")]),e._v(" "),s("p",[e._v("You probably notice there are some options such as "),s("code",[e._v("sourcedir")]),e._v(" and some jobs such as "),s("code",[e._v("indexer.directory_save")]),e._v(" that are not declared in this configuration files. These are the default options, as defined in a configuration file inside "),s("code",[e._v("$RVTHOME/conf")]),e._v(" or "),s("code",[e._v("$RVTHOME/plugins/indexer")]),e._v(". Many of these options are not global, but specific to the modules that need them. If you want to change any of these options you must override the default values provided by the specific module.")]),e._v(" "),s("p",[e._v("The next example explicitly configures all these options, including the specific chain of modules to run instead of using a predefined job.")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[DEFAULT]")]),e._v("\nsource: 112233-01-1\ncasename: 112233-case\nmorgue: /media/morgue\nstop_on_error: false\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[Main]")]),e._v("\njobs:\n    parse_directory\n    index_output\npath: ${sourcedir}\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[parse_directory]")]),e._v("\ndescription: Parse the contents of a source\npath: ${sourcedir}/mnt/p01\nmodules:\n    base.output.JSONSink outfile"),s("span",{pre:!0,attrs:{class:"token attr-value"}},[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("=")]),e._v("'${outputdir}/indexer/${source}.json'")]),e._v("\n    indexer.elastic.ElasticSearchAdapter\n    indexer.directory.DirectoryFilter\n    indexer.tikarpaser.TikaParser\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[index_output]")]),e._v("\ndescription: Index a previously parsed source\nmodules:\n    indexer.elastic.ElasticSearchHelper\npath: ${outputdir}/indexer/${source}.json\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[indexer.elastic.ElasticSearchHelper]")]),e._v("\nes_hosts: http://localhost:9200\ncreate_index: True\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[indexer.tikaparser.TikaParser]")]),e._v("\ntika_server: http://localhost:9998\n")])])]),s("p",[e._v("(This configuration file is roughly equivalent to the predefined job "),s("em",[e._v("indexer.save_directory")]),e._v(". You can just run the predefined job instead)")]),e._v(" "),s("p",[e._v("The rest of this document explores the configuration files in depth.")]),e._v(" "),s("h2",{attrs:{id:"special-configuration-sections"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#special-configuration-sections"}},[e._v("#")]),e._v(" Special configuration sections")]),e._v(" "),s("p",[e._v("There are some special configuration sections:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("DEFAULT")]),e._v(" holds default values for all other sections, when necessary.")]),e._v(" "),s("li",[s("code",[e._v("rvt2")]),e._v(", to configure the rvt2 and its plugins.")]),e._v(" "),s("li",[s("code",[e._v("logging")]),e._v(", section to configure the logging system.")]),e._v(" "),s("li",[s("code",[e._v("Main")]),e._v(", the job to run, if no job is defined in the command line.")])]),e._v(" "),s("h3",{attrs:{id:"default-section"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#default-section"}},[e._v("#")]),e._v(" DEFAULT section")]),e._v(" "),s("p",[e._v("Configure in this section at least these values:")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("casename")]),e._v(": The name of the case. In this documentation, we assume the case name has the format "),s("em",[e._v("IDENTIFIER-CODENAME")]),e._v(". For example, "),s("em",[e._v("12345-mycase")]),e._v(". Anyway, the RVT won't impose a format for the case names.")]),e._v(" "),s("li",[s("em",[e._v("source")]),e._v(": The name of a source of information inside a case, such as disk images or zip files. In this documentation, we assume the source has the format "),s("em",[e._v("IDENTIFIER-NUMBER")]),e._v(", where "),s("em",[e._v("IDENTIFIER")]),e._v(" is the same identifier than the case name. Anyway, the RVT2 won't impose a format to the source names.")]),e._v(" "),s("li",[s("em",[e._v("morgue")]),e._v(": The directory where images, outputs and case files are stored. Check "),s("RouterLink",{attrs:{to:"/rvt2/folder.html"}},[e._v("an example of organization for the morgue directory")]),e._v(".\nAll the paths are meant to be configurable, but we STRONGLY recommend to follow the same organization for all cases.")],1)]),e._v(" "),s("p",[e._v("The morgue is usually configured in the "),s("code",[e._v("RVTHOME/conf/local.cfg")]),e._v(" file, but you might prefer to have several morgues to run tests.\nThese three values are so important that you can also set them from the command line when running the RVT.")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("rvt2 --casename 12345-mycase --source 12345-01 --morgue /morgue -j index_and_save_directory\n")])])]),s("p",[e._v("If you check the system configuration files, you'll notice there are other options created from these values. For example:")]),e._v(" "),s("ul",[s("li",[s("em",[e._v("casedir")]),e._v(": the main directory for the output files. We recommend to have your notes and reports in this same directory.")]),e._v(" "),s("li",[s("em",[e._v("imagesdir")]),e._v(": the directory where the disk images are saved. If you are seriously into DFIR,\nthis directory should be read only, in a RAID volume and backed-up externally in a safe place.")]),e._v(" "),s("li",[s("em",[e._v("sourcedir")]),e._v(": the directory where the source is going to be mounted and the output of the several jobs is going to be saved. For example:\n"),s("ul",[s("li",[e._v("By default, a disk image is expected to be mounted in "),s("code",[e._v("$sourcedir/mnt/p01/indexer/source.json")]),e._v(".")]),e._v(" "),s("li",[e._v("By default, the indexer save files in "),s("code",[e._v("$sourcedir/output/indexer/source.json")])])])]),e._v(" "),s("li",[s("em",[e._v("outputdir")]),e._v(": the directory where the output files are going to be writen.")])]),e._v(" "),s("p",[e._v("See chapter "),s("RouterLink",{attrs:{to:"/rvt2/folder.html"}},[e._v("Folder structure")]),e._v(" for a deeper explanation of this directories.")],1),e._v(" "),s("p",[e._v("If you are not satisfied with the default configuration of these values, change them in "),s("code",[e._v("RVTHOME/conf/local.cfg")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"rvt2-section-and-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#rvt2-section-and-plugins"}},[e._v("#")]),e._v(" rvt2 section and plugins")]),e._v(" "),s("p",[e._v("Plugins are modules and jobs specific for a task. For example, modules to read the Windows registry, or modules to parse files using Apache Tika and index the result in a ElasticSearch server.")]),e._v(" "),s("p",[e._v("These plugins reside in their own directory. You must declare them in the "),s("code",[e._v("plugins")]),e._v(" option of the "),s("code",[e._v("[rvt2]")]),e._v(" section. The source tree of the RVT2 provide some plugins, and you can write your own plugins for the RVT2 and save them in a completely different path in your computer.")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[rvt2]")]),e._v("\nplugins:\n    ${rvthome}/plugins/indexer\n    ${rvthome}/plugins/ios\n    /some/other/path/yourplugin\npythonpath:\n    ${cwd}\n")])])]),s("p",[e._v("Note you can load any additional python path you might need in the option "),s("code",[e._v("rvt2:pythonpath")]),e._v(". By default, the current directory is added to the python path. Also, the plugin might define its own additional pythonpath in this way:")]),e._v(" "),s("div",{staticClass:"language-ini extra-class"},[s("pre",{pre:!0,attrs:{class:"language-ini"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v('; in the jobs.cfg inside the "yourplugin" directory')]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token selector"}},[e._v("[yourplugin]")]),e._v("\npythonpath:\n    ${userhome}/.local/lib/python3.7/site-packages\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("; this option will be set automatically when the plugin loads, in case you must refer to the pluin directory")]),e._v("\nplugindir:\n")])])]),s("p",[e._v("The default plugins are designed to be loaded always, even if their jobs are not used. This fact isn't going to make the initial run of the RVT2 any slower. In any case, you can decide to not load the plugins you don't need. Be aware one plugin might depend on the modules of other plugin: read the plugin documentation for the additional details.")]),e._v(" "),s("h3",{attrs:{id:"main-section"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#main-section"}},[e._v("#")]),e._v(" Main section")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("Main")]),e._v(" section is the entry point to the system. It defines either:")]),e._v(" "),s("ul",[s("li",[e._v("The list of jobs to run (if the section includes the option "),s("code",[e._v("jobs")]),e._v(")")]),e._v(" "),s("li",[e._v("The description of a single job (if the section includes the option "),s("code",[e._v("modules")]),e._v(")")]),e._v(" "),s("li",[e._v("The description of a single module (if the section include the option "),s("code",[e._v("module")]),e._v(")")])]),e._v(" "),s("p",[e._v("By default, the "),s("code",[e._v("Main")]),e._v(" section shows the avaible jobs in the system.")])])}),[],!1,null,null,null);t.default=o.exports}}]);